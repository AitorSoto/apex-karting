---
import Layout from '../layouts/Layout.astro';

const ADMIN_PASSWORD = import.meta.env.PUBLIC_ADMIN_PASSWORD;
---

<Layout title="Admin Login - Apex Karting">
  <div class="flex items-center justify-center min-h-[70vh]">
    <div class="bg-zinc-900 border-2 border-red-600 rounded-lg p-8 max-w-md w-full">
      <h1 class="text-3xl font-black mb-4 text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-red-300">
        üîí ADMIN LOGIN
      </h1>
      <p class="text-zinc-400 mb-6">Enter password to access the admin panel</p>
      
      <input 
        type="password" 
        id="password-input" 
        placeholder="Password" 
        class="w-full bg-zinc-800 border-2 border-zinc-700 rounded px-4 py-3 text-white focus:border-red-600 focus:outline-none mb-4"
      />
      
      <button 
        id="login-btn" 
        class="w-full px-6 py-3 bg-red-600 hover:bg-red-700 rounded font-bold uppercase transition-colors"
      >
        Access Admin Panel
      </button>
      
      <p id="error-msg" class="text-red-500 text-sm mt-4 hidden">‚ùå Incorrect password</p>
    </div>
  </div>
</Layout>

<script is:inline define:vars={{ ADMIN_PASSWORD }}>
  const passwordInput = document.getElementById('password-input');
  const loginBtn = document.getElementById('login-btn');
  const errorMsg = document.getElementById('error-msg');

  function checkPassword() {
    const enteredPassword = passwordInput.value;
    if (enteredPassword === ADMIN_PASSWORD) {
      sessionStorage.setItem('admin-auth', 'true');
      window.location.href = '/admin';
    } else {
      errorMsg.classList.remove('hidden');
      passwordInput.value = '';
      passwordInput.focus();
    }
  }

  loginBtn.addEventListener('click', checkPassword);
  passwordInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      checkPassword();
    }
  });

  // Focus on password input
  passwordInput.focus();
</script>
